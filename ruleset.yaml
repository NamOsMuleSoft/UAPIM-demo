#%Validation Profile 1.0


profile: My Organisation Best Practices

description: |
  This ruleset contains best practices for APIs to be used, maintained, and consumed across Anypoint Platform and beyond.

tags:
  - best-practices

violation:
  - resource-use-lowercase
  - api-must-have-title
  - no-2xx-response

warning:
  - api-must-have-description


validations:
  resource-use-lowercase:
    message: |
      Naming conventions for resources:
      - Use lowercase (example: /accounts)
      - For resources with more than 2 words
          - use lowercase for both words (example: /lineitems) or
          - use kebab-case (aka spinal-case) (example: /line-items)
    targetClass: apiContract.EndPoint
    propertyConstraints:
      apiContract.path:
        pattern: '^[a-z\/\{\}-]+$'

  api-must-have-title:
    message: Provide the title for the API.
    targetClass: apiContract.WebAPI
    propertyConstraints:
      core.name:
        minCount: 1

  api-must-have-description:
    message: Provide the description for the API.
    targetClass: apiContract.WebAPI
    propertyConstraints:
      core.description:
        minCount: 1

  no-2xx-response:
    message: |
      HTTP resources not returning a 2xx success response do not describe normal responses from the API.
    targetClass: apiContract.Operation
    propertyConstraints:
      apiContract.returns:
        atLeast:
          count: 1
          validation:
            propertyConstraints:
              apiContract.statusCode:
                pattern: "2[0-9][0-9]"